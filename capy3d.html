<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capybara 3D Model</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer@latest/dist/model-viewer.min.js"></script>
    <script>
window.addEventListener('DOMContentLoaded', (event) => {
    var audio = document.getElementById('myAudio');
    audio.play()
    .catch(error => {
        console.log("Auto-play was prevented by the browser.");
        // Handle the situation where auto-play was not allowed
    });
});
</script>
    <style>
        model-viewer {
            width: 100%; /* Adjust the width as needed */
            height: 300px; /* Adjust the height as needed */
            --model-viewer-background-color: #eaeaea; /* Optional: Change the background color */
        }
    </style>
</head>
<body>
<a href="https://github.huangallison.com/capybara3d.glb" target="_blank">Download Capybara 3D model</a>
<BR>
<a href="capy3d.usdz" rel="ar">View in AR (tested with iPhone)</a> 

<model-viewer src="capy3d.glb" alt="A 3D model of capybara" auto-rotate camera-controls skybox-image="b3.webp"></model-viewer>
    <select id="backgroundSelector" onchange="changeBackground()">
    <option value="b3.webp">Default Background</option>
    <option value="b1.webp">Background 1</option>
    <option value="b2.webp">Background 2</option>
    <option value="bgreen.webp">Background 3</option>
    <option value="backgreen.webp">Background 4</option>
    <!-- Add more options as needed -->
</select>
    
<audio id="myAudio" src="capy.mp3" preload="auto"></audio>
<button onclick="playAudio()">Hear Capybara Sound</button>
    

<script>
function playAudio() {
    var audio = document.getElementById('myAudio');
    audio.play()
    .then(() => {
        console.log("Audio is playing.");
    })
    .catch(error => {
        console.error("Error occurred when trying to play audio:", error);
        // Handle the error, possibly by showing an error message to the user
    });
}
function changeBackground() {
    var selector = document.getElementById('backgroundSelector');
    var modelViewer = document.getElementById('capyModelViewer');

    // Updated method to change the environment image
    const environmentImageURL = selector.value; // URL of the new environment image
    modelViewer.environmentImage = environmentImageURL;
    modelViewer.skyboxImage = environmentImageURL; // Optionally set skyboxImage if needed
    modelViewer.dispatchEvent(new CustomEvent('environment-change')); // Force update if necessary
}
</script>
<hr>
    
<footer>
    <a href="https://capychat.co" target="_blank">CapyChat</a> |  
    <a href="https://draw.capychat.co" target="_blank">CapyDraw</a> | 
    <a href="https://github.huangallison.com/capy3d.html" target="_blank">Capy3D</a> | 
    <a href="https://github.com/AllisonH12">My Github</a>
</footer>

</body>
</html>



